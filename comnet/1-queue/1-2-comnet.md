---
layout: post
title: 电话网和分组网的工作方式区别
---

网络交换有两种主要方式：电路交换和分组交换。

## 电路交换网

电路交换：电路交换的传统模式是通过物理线路为通信双方建立一条专用的通信通道。在传统的电话系统中，我们拨打电话时，电话交换机会为我们分配一条专用线路，直到通话结束，这条线路才会释放给其他用户。这种方式的缺点是，即使我们在通话过程中没有讲话，线路仍然占用着，造成资源浪费。

![](./fig/telephone.jpg)

电路交换网中的通信链路在通信期间为用户专门保留。这种类型的网络我们可以在一些老电影中看到，特别是早期电话交换系统。那时候，话务员会坐在交换台前，手动插拔电缆来连接不同的电话用户。比如，当你打电话到上海时，话务员会将你的线路与上海的线路连接起来，形成一条专用通道，直到你挂掉电话。

如果我们现在使用PCM（脉冲编码调制）技术，TDM（时分复用）中会有多个时隙。例如，在一个时隙被占用时，直到通话结束，这个时隙就属于你。这意味着，即使你在通话过程中不说话，这个时隙依然是你专用的，不会被其他人抢占。每个用户在通话过程中拥有一条专用的电路，即使在不传输数据的情况下，这条电路也会被保留，直到挂断电话。

## 分组交换网

与电路交换不同，分组交换将数据划分为一个个小的数据包（称为“数据报”），每个数据包都有独立的目的地。数据包通过网络传输时，会根据目的地址被路由到不同的路径。这样，网络中的资源得到了更高效的利用。分组交换非常适合用于互联网，因为它能够根据流量的变化动态调整路径，提高网络利用率。

分组交换网的典型代表就是互联网。除了互联网（Internet）之外，其实还有其他类型的分组交换网络，比如X.25，这是一种较早的分组交换技术，现在在一些电信公司中，仍然可能会遇到这种网络技术。

分组交换网的特点是，它传输的信息单位是分组（Packet）。这些分组被存储并转发，每个分组在传输过程中可能会经过不同的路径。这种网络具有较强的灵活性，因为每个分组独立地进行转发和路由，网络节点并不会为某一对话专门保留某条固定的链路。

在传输网中，分组交换（Packet Switching）是一种常见的数据传输方式。与电路交换（如传统的电话网络）不同，分组交换将数据分成小的、独立的包（称为数据报）进行传输，而不是在整个传输过程中占用固定的传输线路。每个数据包都可能选择不同的路径，独立到达目的地。

分组交换的优势在于高效的资源利用，因为它不需要为每个通信会话分配固定的带宽，而是通过动态分配带宽来适应不断变化的网络需求。然而，分组交换也会带来一些延迟和拥堵的问题，尤其是在网络负载较高时。

## 对比：电路交换与分组交换

- 电路交换：通信链路在整个通话过程中为用户专用，直到通话结束。适合对时延和带宽有较高要求的应用，比如传统的电话网络。

- 分组交换：数据被分成独立的分组，每个分组都可能通过不同的路径到达目标。适合不连续、流量变化大的应用，像互联网就是这种类型。

这两种网络各有优劣，我们通过不同的排队模型来分析和优化它们的性能。

## 分组网传输的统计复用

在分组交换网中，统计复用是一种资源分配策略，它不像传统的时分复用（TDM）那样固定地给每个用户分配专门的时间片，而是动态地根据用户需求来分配传输信道的带宽。

- 基本原理：在统计复用中，数据包的传输并不固定分配给某个用户的专用时间段，而是多个用户的数据包根据需要共享一个传输信道。当一个用户没有数据包需要发送时，其他用户可以“抢占”该信道的带宽来发送自己的数据。这种方式提高了信道利用率，因为带宽在不同时刻可以由不同的用户共享。

- 动态分配：在这种机制下，每个数据包都需要标明自己的目的地址，以便接收方能够识别并处理。由于每个数据包都有独立的标识，它们在网络中可能经历不同的路径和时延。网络并不会为每个用户预留固定的带宽，而是依赖于统计学的原理，根据实际使用情况动态地调整带宽分配。

- 优点：相比时分复用（TDM）这种固定的分配方式，统计复用具有更高的带宽利用率。它能够根据实际流量需求动态调整资源分配，减少资源的浪费。

- 挑战：由于资源是动态分配的，统计复用的最大挑战在于公平性和延迟问题。不同的用户可能会经历不同的延迟，尤其在网络负载较高时，某些用户的数据包可能会被延迟或丢失。

## 电话网传输的时分复用

与分组交换网中的统计复用不同，传统的电话网传输（如基于 PCM 的电话交换）采用的是时分复用（TDM）。在时分复用中，信道被划分成多个固定时间段，每个用户在特定时间段内独占一个时间片进行数据传输。

- 固定分配：在时分复用中，每个用户的通信带宽是预先分配的，不会出现抢占的情况。例如，第一个时间片分配给用户A，第二个时间片分配给用户B，第三个时间片分配给用户C，以此类推。这种方式保证了每个用户都有固定的传输时间，不会受到其他用户流量的影响。

- 优点：时分复用的优点在于其稳定性和可预测性。每个用户都有固定的时间段进行数据传输，避免了在高负载时出现的资源竞争和延迟问题。因此，时分复用在实时语音通信中（如传统的电话系统）广泛使用。

- 缺点：时分复用的主要缺点是效率低，因为即使某个用户没有数据需要发送，该用户仍然占用着固定的带宽资源，这导致了信道的低效利用，尤其是在网络负载较轻时。

## 总结

- 统计复用：动态分配带宽，信道使用更高效，适用于数据包交换的场景，能根据用户需求灵活调整带宽。
- 时分复用：固定分配带宽，适用于实时通信（如电话系统），避免了资源竞争，但可能导致低效的带宽利用。

## 扩展阅读：微信语音与电话语音的区别

微信语音和传统电话语音的区别，主要体现在它们使用的通信网络和技术不同。具体来说：

1. 微信语音：
   - 网络类型：微信语音是通过分组交换网进行传输的。分组交换网将数据分成小的数据包，每个数据包通过不同的路由传输，最终到达目的地。这种方式的优点是可以高效利用网络资源，但也存在传输延迟和丢包的风险。
   - 语音质量：由于分组交换是将语音数据切割成数据包传输，每个数据包可能经过不同的路径，这样会导致语音在传输过程中可能出现延迟或丢包，影响语音的清晰度。如果网络拥塞或者丢包严重，通话质量会下降。
   - 成本：微信语音通常是基于网络流量的收费方式，用户可以在不受通话时长限制的情况下使用，只要有足够的数据流量。

2. 电话语音：
   - 网络类型：传统电话语音使用的是电路交换网。电路交换网是为每通电话提供专用的通信通道，从电话接通时到通话结束，整个通话过程都在这个固定的通道上进行。它保证了通话的连续性和稳定性。
   - 语音质量：由于电路交换网在通话开始时分配了一条固定的通道，因此它可以提供较为稳定的带宽，语音质量通常较高，不会出现丢包或延迟等问题，音质更清晰。
   - 成本：电话语音通常按照通话时长收费，且每次通话的费用相对较高。

主要区别：

- 网络类型：微信语音通过分组交换网进行传输，而电话语音通过电路交换网进行传输。
- 语音质量：电话语音质量通常较为稳定，不容易受网络拥塞影响；而微信语音可能会出现延迟或丢包，影响通话质量。
- 收费方式：电话语音按通话时长收费，而微信语音通常按流量计算，且没有时间限制。

为什么微信语音有时质量差？

微信语音走的是分组交换网络，数据会被分成小包，经过不同的路径传输，这会导致在网络不稳定时，可能会丢包或出现延迟，从而影响语音质量。而传统电话语音在电路交换网中，通话的质量较有保障，尽管可能会花费更多费用。

总之
- 微信语音适用于大部分日常使用，但在网络质量不佳时，可能会影响通话清晰度。
- 电话语音则提供更高质量和稳定的通话体验，但需要按时长收费。

|[Index](./) | [Previous](1-1-telenet) | [Next](1-3-packetnet) |
