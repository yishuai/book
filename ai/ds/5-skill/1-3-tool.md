---
layout: post
title: 基本工具
---

本节介绍命令行工具的基本概念、命令和 vi。

## 命令行工具

我们做数据处理的时候，有两个地方会用到命令行工具。一是对数据，特别是文本数据进行处理时，二是使用各种大数据系统时。

大家平时学习生活中用命令行工具比较少。用得比较多的是 Windows 或者 MacOS 的图形化用户界面。在这种界面中，用鼠标用得很顺手。

那么，你有没有想过，我们可不可以给系统发“命令”呢？如果系统能够接受我们给它的“命令”，是不是也挺酷的？事实上，Windows、MacOS，还有数据科学常用的 Linux 系统，都能接受这些指令。

大家用过 Windows 的命令行吗? 没用过？我给大家演示一下。你在 Windows 的这个搜索框里敲 cmd，就会出来一个这么特别酷的黑客的屏幕。在这里，我们就可以输入各种命令了。

下面我们就介绍一些基本的一些命令。我们下面介绍 Linux 的命令，但用 Windows 系统演示。注意，数据科学常用 Linux 系统，而 Linux 的命令和 Windows 的命令稍微有一点差别。此外，大家现在也常用 MacOS。很高兴的是，Linux 命令和 MacOS 命令是一样的，所以它们两是可以通用的。

第一个 Linux 命令是 ls。ls 相当于 Windows 里的 dir。我们看，dir 是 directory 的首字母。运行它之后，我们就能看到这个目录下的子目录和文件。注意 ls 在 Windows 里不支持。Windows 里就是 dir。到了 Linux 下，你就用 ls 这个命令，它的效果是一样的。你就能看到，文件和子目录是什么时候创建的，它是个一个目录，还是一个文件。如果是文件的话，它有多大，你都能看到。Linux下 ls 的功能更加强大。

第二个命令是 cd。Linux 和 Windows 下都用 cd 这个命令。cd，就是进去一个目录。
大家看，这个 contacts，就是联系人，是一个目录。我现在想要进去这个目录。我们原来是在资源管理器里面双击这个目录，对不对？但是我们现在用命令。我们在这个命令行界面里敲 cd contacts，然后回车。大家看，我原来是在这个 user yf 目录下。一旦我 cd contacts 了，这个显示的路径就变长了，说明我在 contacts 这个目录下了。这就是 cd 的功能。

命令行特别好用。为什么呢？比如说，大家看，cd 空格后，你就敲一个c，然后按 tab 键，这个命令行工具就会自动帮你补全。所以命令行其实很方便的。

大家注意到没有，在这个目录下，ls 以后，它显示的目录下的子目录和文件的列表里，第一个目录是一个点，第二个目录是两个点。它们是有意义的。这一个点就代表着自己，两个点就代表上一级目录。所以，大家看我现在已经进入了 contacts 目录了，没错吧。我现在cd ..，它就回到上一级目录了。你看，我就从 contacts 这个目录下，回到了 user yf目录下了。

第三个命令是 cp。cp 就是 copy，复制。

第四个命令是 rm。rm 就是 remove，删除。这个 rm 大家要小心点用啊，因为它不进回收站的，它真的就删了，所以要特别小心。

下面讲命令的语法。命令的语法是首先敲命令的名字，比如 ls，然后呢，敲一个减号，后面带一些字母。这些字母就是 option（选项）。最后，是这个命令的参数（parameter）。

这个 option 就很有讲究了。比如说，rm -rf 后面跟一个目录，比如这个 contacts 目录，它就会把这个目录删掉。具体怎么做的呢？我们来看它的两个 options。

首先是 f 这个 option。它的意思是 force，就是说：它不会再提示你了，就直接删。为什么要加这个 option 呢？因为如果不加的话，它会问你：真的要删吗？你要回答一个 yes，它才真删。所以，你加一个 f option，就是说：你别问我了，你就删吧。它就会安静地全删掉了啊。就恢复不了了啊！所以要慎重！

其次是 r 这个 option。它的意思是“递归地”（recursive），意思是它会从这个目录的最底层的子目录开始，递归地，一级级往上，依次删除，直到把整个目录都删干净。为什么要从最底层的子目录开始删呢？因为如果一个文件夹里面有东西的话，它是不删的啊。所以，必须得先进入最底层的目录，把里面的文件删掉，才能删掉这个目录，然后一级级地往上删。

在哪里找到这些 options 的使用说明呢？在 Linux 下，有一个命令 man。这个 man 是 manual（手册）。你敲这个man，然后后面跟上一个命令的名字，它就会给你这个命令的详细解释，告诉你这个命令是干啥的，里面有些什么 option。

大家就说了：哎，老师，我用鼠标点一点不挺好的吗？多么开心啊！为什么还要我敲这么多字母啊，这黑咕隆咚的，虽然确实比较保护眼睛。

为什么呢？由两个原因。首先，这是因为，我们可以用这个终端，远程登录到各种数据处理的高性能服务器上去工作。那么，在这个终端上，你就没有鼠标可以点，你只能敲这些东西，对吧？所以得准备这些知识才行。其次，利用这些基本的命令，你就可以编写脚本，让电脑按照你的脚本，自动执行一系列工作啦。这样能给你很大的灵活性，不用一路点鼠标，点无数次。这就是 Shell 编程。数据科学的很多工作，就是这样完成的啊。

这是数据科学的工程师，不管是分析师，还是系统工程师，都是要学会的。

## vi 文本编辑工具

我们下面介绍 vi 文本编辑工具。

我们通过命令行操作远程服务器时，有时要编辑一下上面的一些文件，比如说配置文件。比如 Hadoop 默认的是复制四份，你觉得不够，你要复制五份，那么你要在上面打开一个配置文件，把里面那个四给它修改成五。这个时候，你说我先下载下来，用 word 打开，改一下再传上去。这是不是太麻烦了？更快捷的方式是利用 vi，就在这个终端窗口里头，打开一个文件，编辑完了之后，再存起来，然后退出。所以这个vi的基本操作也是大家要掌握的。

vi 熟悉起来要一点时间，但会用了的话，就特别快，比 Word 快很多。为什么呢？因为它像命令行那样，也是能够接受各种命令的。

用 vi 操作的时候，心里面要有一种感觉，是它现在是工作在一个什么状态下。

它有三种状态：

第一种状态是“命令”状态。此时，你敲什么东西，vi 不会显示在屏幕上，而是把它们当作“命令”，然后执行你的命令。

比如说你敲一个"dd"。vi 不会在屏幕上给你输出"dd"，它会把这个"dd"理解为是你在给它一个命令。这个命令代表着什么呢？就是把光标在的这一行删掉。所以你想把这一行删掉，那你就进入这个命令模式，然后敲"dd"，一行就没了。快速吧？

类似的，光标移动，比如把光标跳到一个单词的首字母，或者跳到一行的开头，或者跳到这一行的结束，都有相应的命令。删除一个字符，一个字，或者整行；把这一行复制 n 遍，都有相应的命令。这些命令，用多了自然就熟了，不用死记硬背。

当你这么工作的时候，旁边的人就像你在写天书似的，只见你敲几下键盘，文字就变成了你想要的文字，觉得“泰酷辣”。其实是你在“命令”模式下，用命令在控制 vi 这个机器人在干活呢，所以就特别酷。这就是命令模式。

第二种状态是“插入”状态。在命令模式下，敲一个"i"，就是“插入（insert）”的意思，就会进入 insert 模式。这个时候你敲的字符就会出现在屏幕上，插入你的文本里。这时候你就可以敲你想写的文本了。

你想退出这个模式，回到命令模式的话，你就敲一下键盘左上角的 ESC 键，就回到命令行模式了，就可以 dd 什么的了。

第三种状态是“底行命令”模式。比如你最后要把写好的内容，写入硬盘，这时候你可以输入冒号“:”，就会进入这个模式。然后你输入 w，就是“写入”（write）的意思，你的文件就保存到硬盘上了。如果输入 q，就是“退出”（quit），就退出了。

为了进行数据科学的工作，掌握命令行和vi是十分必要的。

<br/>

|[Index](../) | [Previous](1-1-intro) | [Next](3-3-pandas) |
