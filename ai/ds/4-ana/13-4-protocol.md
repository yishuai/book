---
layout: post
title: 测量方法和协议的设计
---

我们然后讨论如何进行测量方法和协议的设计，以减少导致我们出错的两个主要原因：Bias（偏差）和 Variation（精度）。我们需要精心设计调查方法、调试仪器，减少偏差，应对实验结果 Variation 的影响。

Protocol 指的是我们的调查或者测量的方案。我们在做用户调查的时候，先做什么后做什么，问什么问题，这些都是Protocol 事先设计好的。这包括如何选择样本。如果选择样本不好的话，就会带来偏差（bias）；还包括如何跟进没有回复的人。这个很重要，因为你问他，他可能不理你。这可能又给我们的调查带来偏差。你想，他不理你，你就没调查到他。而且，他为什么不理你呢？可能是有原因的。所以要后续进行跟进，解决这些问题，改进调查 Protocol。此外，还要做调研员的培训，检查问题的设计，确保问题问得没有倾向性，不引导用户的回答，保证调查的可信度。而我们做自然科学测量的时候，要把仪器调好，把测量的点位、时间、地点、测量数量，都事先计划好。

在调查和测量的过程中，控制变量的考虑和记录非常重要。任何影响实验输出的因素都要记录。否则数据分析的结果可能会与事实背道而驰。比如著名的辛普森悖论：如果不记录学生的“学院”这个因素，然后在分析的时候，控制住“学院”这个变量，按学院来分析不同性别学生的入学比例，那么观察到的结果，反而和事实并不相符。所以，在测量和分析的过程中，进行控制变量的记录和考虑，非常重要。可是，影响实验输出的因素可能很多，这就要大家积累领域的专业知识，尽可能地理解研究针对的系统的内部机制，尽可能多地了解测量的系统的各种情况，尽可能细致地做探索性的数据分析，发现这些因素了。比如，在我们的测量过程中，我们测量的系统的算法可能变了，导致测量结果发生了变化。我们就得靠数据分析、观察，和系统的运维人员交流，发现这个情况，然后做相应的处理。在合并多个数据源的时候，也要非常小心，比如在辛普森悖论中，不能在合并两个学院的学生数据时，把“学院”这个关键的控制变量丢失了。

## 示例

我们下面给大家举个例子。现在全世界的人都在说地球变暖，说空气中的二氧化碳浓度提高了，那到底提高了多少？我们怎么测呢。我们来考虑一下它的测量问题，设计一个测量的 Protocol。

我们考虑下面这种测量协议：测二氧化碳浓度一般用 PPM 这个量来测量，就是每 100 万个干空气的分子中，二氧化碳分子的数量。于是，我们就去淘宝上买一个几百块钱的测量仪。快递寄过来了，开包就在宿舍里测。测三天之后，就发表结果。结果是，你发现：二氧化碳浓度这几天还降低了。而且，你还建立了探索性数据模型，发现这是因为最近交大绿树成荫，这些树吸收了很多二氧化碳，所以浓度变低了。所以你得出结论：全球不会变暖，因为现在环境好了，二氧化碳浓度不会再升高了。

上面的这个测量协议有什么问题？按着这个协议，我们的测量结果（Access Frame）和目标人群（地球的二氧化碳浓度）真的匹配吗？让我们思考这个问题。

首先，我们思考“控制变量”和“测量方案”。我们想想，和我们的目标人群（地球的二氧化碳浓度）相关的控制变量有哪些？比如，测量的时间和地点？如果测量结果和时间有关的话，那么如何使用仪器，让我们的测量更准确？比如，是每隔 5 分钟测一次，还是每隔 10 分钟一次？一天 24 小时内应该怎么测？

通过思考，查找专业知识，和专业人士讨论，我们最后可能会发现，“地点”是影响空气中的二氧化碳浓度的重要控制变量。

首先，这个地点的环境必须十分稳定，几十年如一日的那种。因為我們要研究的是地球變暖，它是個很長期的过程。可能在我們一生中地球也就變暖一点点，所以我们要测量的二氧化碳浓度也是幾十年时间尺度内的變化。所以得找一个特别稳定的、幾十年如一日的地方。肯定不能在北京，对吧？得在人跡罕至的地方，比如青藏高原。对。

然后，地点和影响二氧化碳浓度的其他环境变量，如“植被”、“污染”、“海拔”，都息息相关。具体来说，植物有關係，因为植物吸收二氧化碳。“海拔”也有关系：不同海拔的空气，二氧化碳浓度不同。最后是“污染”：污染严重的话，二氧化碳浓度高。这些因素都取决于地点。

所以，最终大家选择的测量地点是太平洋里的一个死火山。首先，这里一百年前和一百年后都差不多，环境特别稳定。其次，在火山这里进行测量还能控制住其他影响二氧化碳浓度的控制变量。比如，火山周圍没有植被。这就控制住了“植被”这个因素。火山的海拔高度很稳定，这就控制住了“海拔”这个因素。太平洋里的这个小岛沒有什麼污染。偶爾有一條船經過，它排放一点污染物也问题不大，这就控制住了“污染”这个因素。所以最终大家选定在太平洋上的一個死火山的火山口进行测量，周圍全是已经凝固的岩漿。

我们还可能发现，空气中的二氧化碳浓度和测量时间，比如季节、Time of Day 有关。因为一年四季，或者一天内太陽出來到落下，气温和空氣流動都不同。所以，我们在测量的时候，要进行周期测量，记录测量的时间，然后在分析的时候，给予考虑。

然后，我们思考“测量仪器”，设计仪器的使用协议。

首先需要确定的是测量仪器和测量方法。我们用的是什么仪器？是便携式的、可以在现场测的仪器，还是那种高精度的，需要在专门实验室里安装好，才能进行测量的仪器？一种测量方法是咱们把仪器搬到火山上面去测。这样的测量最及时，但是那个山上面的测量条件不好，不太好部署高精度的仪器。所以还有一个测量方法是把山上的空气运到实验室，这样就可以用实验室的高精度仪器进行测量了。比如，你拿个盒子，装一盒空气，赶紧打包，回到北京实验室再测量。你想，我们要测量的是 100 万个分子里面有多少个二氧化碳分子，要测量准确的话，对测量的设备要求还是非常高的。

其次我们要对这个设备进行精确的校准。怎么校准呢？我们首先配制一个特别特别准的参考气体，它的 PPM 是精准已知的，比如 100 万个空气分子，我里面就放 400 个二氧化碳分子（因为自然空气中二氧化碳的浓度大约为 0.04%）。所以这个空气的 PPM 是极准的。然后我们就拿着仪器测一下这个参考气体。仪器如果测得准就好。如果测得不准，就赶紧调仪器。而且，在火山口上，每小时这样校准一次，每次测量 5 分钟。每天再对另外两个参考气体测量一次，每次测量 15 分钟，因为怕万一这个参考气体漏气不准了。挺不容易的吧？

最后，同时用多个设备，周期地测。如果发现测量值偏离了小时平均了，就赶紧提高测量的频率，每五分钟测一下。

上面这个空气测量的例子，深刻地说明了“数据Scope”的重要性。毕竟，地球变暖是事关人类前途和命运的一个大事。如果测量结果说明地球确实不能呆了，那咱们还得跑火星上去，或者流浪地球。所以必须认真专业地设计，解决好数据的 Scope 的问题，确保测量的结果反映真实情况。我们做数据科学的第一步，就是搞清楚拟研究问题的目标人群和数据的 Access Frame，分析清楚和测量目标有关的控制变量，比如地理位置、时间、测量仪器、方法、样本分布等等。设计好测量方法，进行全面、准确的数据记录。这是整个后面数据科学研究工作的基础。否则的话，收集来的数据就是有偏差的，我们后面分析得再好，也没有用啊。

## 小结

我们接到任何一个数据科学的任务和数据后，要问下面几个问题：

- who & why：这个数据是谁收集的，他为什么要收集？他收集的目的，可能和我们的研究目的不一样。这样的话，要评估它的 Access Frame 和我们的目标人群是否匹配，以决定这个数据是否适用于解决我们感兴趣的问题。
- when & where：数据是在哪里收集的，在何时收集的。这个数据是不是已经“老”了，它收集的地方是不是和我要面对的问题的地方不一样？
- 目标人群和测量方法：用了什么仪器，怎么校准的仪器，用什么方法来选择的样本，怎么访问这些目标人群的，怎么记录的控制变量

<br/>

|[Index](../) | [Previous](13-3-error) | [Next](13-5-simulation)|

